{
  "add-field-type": [
    {
      "name": "title",
      "class": "solr.TextField",
      "indexAnalyzer": {
        "tokenizer": {
          "class": "solr.NGramTokenizerFactory",
          "minGramSize": 3,
          "maxGramSize": 3
        },
        "filters": [
          {
            "class": "solr.ASCIIFoldingFilterFactory",
            "preserveOriginal": false
          },
          { "class": "solr.LowerCaseFilterFactory" }
        ]
      },
      "queryAnalyzer": {
        "tokenizer": {
          "class": "solr.NGramTokenizerFactory",
          "minGramSize": 3,
          "maxGramSize": 3
        },
        "filters": [
          {
            "class": "solr.ASCIIFoldingFilterFactory",
            "preserveOriginal": false
          },
          { "class": "solr.LowerCaseFilterFactory" }
        ]
      }
    },
    {
      "name": "noUrlText",
      "class": "solr.TextField",
      "indexAnalyzer": {
        "tokenizer": {
          "class": "solr.StandardTokenizerFactory"
        },
        "filters": [
          {
            "class": "solr.ASCIIFoldingFilterFactory",
            "preserveOriginal": false
          },
          {
            "class": "solr.LowerCaseFilterFactory"
          },
          {
            "class": "solr.StopFilterFactory",
            "words": "stopwords.txt"
          }
        ]
      },
      "queryAnalyzer": {
        "tokenizer": {
          "class": "solr.StandardTokenizerFactory"
        },
        "filters": [
          {
            "class": "solr.ASCIIFoldingFilterFactory",
            "preserveOriginal": false
          },
          {
            "class": "solr.LowerCaseFilterFactory"
          },
          {
            "class": "solr.StopFilterFactory",
            "words": "stopwords.txt"
          }
        ]
      }
    },
    {
      "name": "text",
      "class": "solr.TextField",
      "indexAnalyzer": {
        "tokenizer": {
          "class": "solr.UAX29URLEmailTokenizerFactory"
        },
        "filters": [
          {
            "class": "solr.ASCIIFoldingFilterFactory",
            "preserveOriginal": true
          },
          { "class": "solr.LowerCaseFilterFactory" },
          {
            "class": "solr.StopFilterFactory",
            "words": "stopwords.txt"
          }
        ]
      },
      "queryAnalyzer": {
        "tokenizer": {
          "class": "solr.StandardTokenizerFactory"
        },
        "filters": [
          {
            "class": "solr.ASCIIFoldingFilterFactory",
            "preserveOriginal": true
          },
          { "class": "solr.LowerCaseFilterFactory" },
          {
            "class": "solr.StopFilterFactory",
            "words": "stopwords.txt"
          }
        ]
      }
    },
    {
      "name": "url",
      "class": "solr.TextField",
      "indexAnalyzer": {
        "tokenizer": {
          "class": "solr.PatternTokenizerFactory",
          "pattern": "([a-zA-Z0-9]*)\\.",
          "group": 1
        }
      },
      "queryAnalyzer": {
        "tokenizer": {
          "class": "solr.StandardTokenizerFactory"
        }
      }
    },
    {
      "name": "singleToken",
      "class": "solr.TextField",
      "indexAnalyzer": {
        "tokenizer": {
          "class": "solr.KeywordTokenizerFactory"
        }
      },
      "queryAnalyzer": {
        "tokenizer": {
          "class": "solr.KeywordTokenizerFactory"
        }
      }
    },
    {
      "name": "date",
      "class": "solr.TrieDateField"
    }
  ],
  "add-field": [
    {
      "name": "story_title",
      "type": "title",
      "stored": true
    },
    {
      "name": "story_text",
      "type": "noUrlText",
      "stored": true
    },
    {
      "name": "story_time",
      "type": "date",
      "docValues": true,
      "indexed": true
    },
    {
      "name": "url",
      "type": "url",
      "stored": false
    },
    {
      "name": "url_raw",
      "type": "singleToken"
    },
    {
      "name": "url_text",
      "type": "text",
      "stored": true,
      "multiValued": false,
      "large": true
    },
    {
      "name": "comments.comment_text",
      "type": "text",
      "stored": true,
      "multiValued": true
    },
    {
      "name": "search",
      "type": "text",
      "multiValued": true
    }
  ],
  "add-copy-field": [
    {
      "source": "story_title",
      "dest": "search"
    },
    {
      "source": "story_text",
      "dest": "search"
    },
    {
      "source": "url",
      "dest": "search"
    },
    {
      "source": "url_text",
      "dest": "search"
    },
    {
      "source": "url",
      "dest": "url_raw"
    }
  ]
}
